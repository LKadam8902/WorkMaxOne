<div class="team-lead-dashboard">
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="dashboard-icon" title="Dashboard">ðŸ“Š</div>
  </div>

  <!-- Main content -->
  <div class="main-content">
    <div class="top-bar">
      <!-- Left: Logo -->
      <img src="./logo11.png" alt="WorkMax Logo" class="logo-image" />
    
      <!-- Right: Profile Dropdown -->
      <div class="profile-dropdown">
        <img src="./icon.jpg" alt="Profile" class="profile-icon" (click)="toggleDropdown()" />
        <div class="dropdown-menu" *ngIf="showDropdown">
          <p>Team Lead</p>
        </div>
      </div>
    </div>

    <!-- Messages -->
    <div *ngIf="errorMessage" class="message error-message" (click)="clearError()">
      {{ errorMessage }}
      <span class="close-btn">Ã—</span>
    </div>
    <div *ngIf="successMessage" class="message success-message">
      {{ successMessage }}
    </div>

    <!-- Loading Spinner -->
    <div *ngIf="isLoading" class="loading-spinner">
      <div class="spinner"></div>
    </div>

    <!-- Projects Section -->
    <div class="section">
      <div class="section-title">Projects</div>
      <div class="create-form">
        <input 
          type="text" 
          [(ngModel)]="newProjectName" 
          placeholder="New project name"
          [class.error]="errorMessage && !newProjectName.trim()" />
        <button 
          (click)="createProject()" 
          class="create-btn"
          [disabled]="isLoading">
          Create Project
        </button>
      </div>
      <div class="table-container">
        <table class="data-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Name</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let project of projects">
              <td>{{ project.id }}</td>
              <td>{{ project.name }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Tasks Section -->
    <div class="section">
      <div class="section-title">Tasks</div>
      <div class="create-form">
        <select 
          [(ngModel)]="selectedProjectId"
          [class.error]="errorMessage && !selectedProjectId"
          class="project-select">
          <option [ngValue]="null">Select a project</option>
          <option *ngFor="let project of projects" [value]="project.id">
            {{ project.name }}
          </option>
        </select>
        <input 
          type="text" 
          [(ngModel)]="newTaskName" 
          placeholder="New task name"
          [class.error]="errorMessage && !newTaskName.trim()" />
        <div class="skills-input">
          <input 
            type="text" 
            [(ngModel)]="newTaskSkills" 
            placeholder="Skills (comma-separated)"
            [class.error]="errorMessage && !newTaskSkills.trim()" />
          <div class="skills-hint">Enter skills separated by commas (e.g., Java, Python, React)</div>
        </div>
        <button 
          (click)="createTask()" 
          class="create-btn"
          [disabled]="isLoading">
          Create Task
        </button>
      </div>
      <div class="table-container">
        <table class="data-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Name</th>
              <th>Project</th>
              <th>Skills</th>
              <th>Status</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let task of tasks">
              <td>{{ task.id }}</td>
              <td>{{ task.name }}</td>
              <td>{{ getProjectName(task.projectId) }}</td>
              <td>
                <div class="skills-tags">
                  <span *ngFor="let skill of task.skillSet" class="skill-tag">
                    {{ skill }}
                  </span>
                </div>
              </td>
              <td>{{ task.status }}</td>
              <td>
                <button 
                  *ngIf="task.status === 'Pending'"
                  (click)="assignTask(task.id)" 
                  class="assign-btn"
                  [disabled]="isLoading">
                  Assign
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div> 